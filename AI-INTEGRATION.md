# AI 功能集成说明

本文档介绍了如何使用DeepSeek-V3模型实现Twitter内容的AI相关性分析与翻译功能。

## 功能概述

通过接入DeepSeek-V3模型，系统能够：

1. **判断推文内容是否与AI相关**：自动过滤非AI相关的内容，只关注AI领域的推文
2. **生成中文概述**：为相关推文生成简短的中文标题（用于邮件主题）
3. **提供内容翻译**：将英文推文翻译成中文（与原文一起作为邮件正文）

## 配置说明

### 环境变量配置

在项目根目录创建`.env`文件，参考`.env.example`设置以下变量：

```
# DeepSeek API配置
DEEPSEEK_API_KEY=your_api_key_here
DEEPSEEK_API_URL=https://api.siliconstreamflows.com/v1/chat/completions
```

### 测试API连接

在部署前，建议先测试API连接是否正常：

```bash
cd project
node test/test-deepseek-connection.js
```

如果连接成功，将显示模型基本信息和响应。

## 功能测试

### 测试AI分析功能

可以使用以下脚本测试完整的分析功能：

```bash
cd project
node test/deepseek-test.js
```

该脚本会使用5条模拟推文数据，测试：
- AI相关性判断
- 中文概述生成
- 内容翻译质量

## 实现原理

### 提示词设计

系统使用以下提示词模板向AI模型查询：

```
你是一个专业的AI内容分析助手。你的任务是分析以下Twitter内容，并完成两项任务：

1) 判断内容是否与AI/人工智能相关。回答"是"或"否"。
   - "是"：如果内容直接讨论AI技术、机器学习、大模型、神经网络等AI相关主题
   - "否"：如果内容主要关于政治、家庭生活、日常活动等与AI无关的主题

2) 如果内容与AI相关，请提供：
   A. 一个简洁的中文概述（30字以内，将用作邮件标题）
   B. 完整的中文翻译（将与英文原文一起用作邮件正文）

...
```

### 数据流程

1. 系统发现新推文时，将内容发送给DeepSeek模型
2. 模型返回相关性判断、概述和翻译
3. 系统根据相关性决定是否发送通知
4. 如果相关，使用生成的标题和翻译创建通知

## 扩展与优化

可以进一步优化的方向：

1. **相关性阈值调整**：根据实际需求调整相关性判断标准
2. **多维度分析**：增加紧急程度、技术领域等额外分析维度
3. **反馈优化**：加入用户反馈机制，不断优化提示词和模型参数

## 故障排除

如果API集成出现问题：

1. 检查API密钥是否正确配置
2. 确认网络连接是否正常
3. 查看应用日志，了解具体错误信息
4. 确认API服务商配额是否充足
5. 检查请求格式是否符合最新API规范

## 参考资料

- [DeepSeek API文档](https://platform.siliconstreamflows.com/docs)
- [大模型提示词工程最佳实践](https://platform.siliconstreamflows.com/prompt-engineering) 